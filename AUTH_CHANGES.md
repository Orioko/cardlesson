# Изменения в системе авторизации

## Реализованные улучшения

### 1. Разделение регистрации и авторизации
- **Регистрация**: Создает нового пользователя с проверкой на существование email
- **Авторизация**: Проверяет существующие учетные данные (email + пароль)
- Пользователи хранятся в localStorage в ключе `registered_users`

### 2. Валидация данных
- **Email**: Проверка на корректный формат (регулярное выражение)
- **Пароль**: Минимальная длина 6 символов
- Все сообщения об ошибках локализованы на 3 языка (RU, EN, KO)

### 3. Привязка слов к профилю пользователя
- Каждое слово сохраняется с userId
- При входе загружаются только слова текущего пользователя
- Кэш слов хранится отдельно для каждого пользователя: `words_cache_{userId}`

### 4. Рефакторинг компонентов

#### Созданные утилиты:
- `src/utils/validation.ts` - функции валидации email и пароля
- `src/utils/userStorage.ts` - работа с хранилищем зарегистрированных пользователей

#### Созданные хуки:
- `src/hooks/useAuth.ts` - логика авторизации и регистрации
- `src/hooks/useWords.ts` - загрузка и синхронизация слов пользователя
- `src/hooks/useWordActions.ts` - операции редактирования и удаления слов

#### Обновленные компоненты:
- `LoginPage` - использует хук useAuth, убрана сложная логика
- `MainPage` - использует хук useWords
- `DictionaryPage` - использует хуки useWords и useWordActions

## Структура хранения данных

### localStorage ключи:
1. `local_user` - текущий авторизованный пользователь
2. `registered_users` - массив всех зарегистрированных пользователей
3. `words_cache_{userId}` - кэш слов для конкретного пользователя
4. `words_cache_timestamp_{userId}` - время последней синхронизации

## Как это работает

### Регистрация:
1. Валидация email и пароля
2. Проверка на существование email
3. Создание нового userId
4. Сохранение в registered_users
5. Автоматический вход

### Авторизация:
1. Валидация email и пароля
2. Поиск пользователя по email
3. Проверка пароля
4. Вход в систему
5. Загрузка слов пользователя

### Работа со словами:
1. При добавлении слова оно сохраняется с userId
2. При входе загружаются только слова текущего userId
3. Кэш автоматически синхронизируется с сервером
4. Каждый пользователь видит только свои слова

